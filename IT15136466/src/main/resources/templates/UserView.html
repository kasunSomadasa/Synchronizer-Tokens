<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

<meta charset="ISO-8859-1">
<title>Transfer Money</title>
<script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"></link>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body>
	<div class="container">
		<h2>Transfer Money</h2>
		<h2 class="text-success" th:text="${msg}"></h2>

		<form method="POST" action="/money" modelAttribute="Account">

			<div class="form-group">
				<label for="email">Account No:</label> <input type="text"
					name="account" class="form-control">
			</div>

			<div class="form-group">
				<label for="email">Amount:</label> <input type="number"
					name="amount" class="form-control">
			</div>
			<input type="hidden" id="csrf" name="csrf" />
			<button type="submit" class="btn btn-primary" id="submit">Submit</button>


		</form>

	</div>


	<script type="text/JavaScript">

		$(document).ready(function() {
			$.ajax({
				type : "POST",
				url : "/cookie",
				success : function(data) {
					//get csrf cookie and set into hidden filed
					document.getElementById("csrf").value = data;
					console.log(data);
				},
				error : function(xhr, ajaxOptions, thrownError) {
					var errorMsg = 'Ajax request failed: ' + xhr.responseText;
					alert(errorMsg);
				}
			});
		});

	</script>
	
</body>
</html>